{% macro service_card(service) %}
<div class="group relative flex flex-col h-full bg-white/60 dark:bg-surface-sunken backdrop-blur-3xl rounded-[2rem] border border-brand-primary/10 hover:border-brand-primary/30 hover:shadow-2xl hover:shadow-brand-primary/10 transition-all duration-500 overflow-hidden @container">
    <div class="absolute inset-0 bg-gradient-to-br from-brand-primary/5 to-brand-secondary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
    
    <div class="relative z-10 flex flex-col h-full p-8">
        <div class="mb-6 inline-flex items-center justify-center w-16 h-16 rounded-xl bg-brand-primary/10 text-brand-primary group-hover:bg-brand-primary group-hover:text-white transition-colors duration-300">
            <i class="las la-{{ service.icon }} text-3xl"></i>
        </div>
        
        <h3 class="text-h3 font-heading leading-tight mb-3 text-brand-dark">
            {{ service.title }}
        </h3>
        
        <p class="text-brand-gray opacity-80 leading-relaxed mb-6 flex-grow">
            {{ service.description }}
        </p>
        
        <a href="{{ service.link }}" class="inline-flex items-center text-brand-primary font-semibold tracking-wide group-hover:translate-x-2 transition-transform duration-300 py-3 min-h-[44px]">
            Learn More <i class="las la-arrow-right ml-2 text-lg"></i>
            <span class="absolute inset-0" aria-hidden="true"></span>
        </a>
    </div>
</div>
{% endmacro %}

{% macro course_card(course) %}
<div class="group relative flex flex-col bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden @container">
    <div class="aspect-video relative overflow-hidden bg-gray-100">
        {% if course.image %}
            <img src="{{ url(course.image) }}" alt="{{ course.title }} thumbnail" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" loading="lazy">
        {% else %}
            <div class="w-full h-full flex items-center justify-center text-brand-primary bg-brand-primary/5">
                <i class="las la-graduation-cap text-6xl opacity-50"></i>
            </div>
        {% endif %}
        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-60"></div>
        <span class="absolute bottom-4 left-4 inline-flex items-center px-3 py-1 bg-brand-primary text-white text-xs font-bold uppercase tracking-wider rounded-full shadow-md">
            Course
        </span>
    </div>
    
    <div class="p-6 flex flex-col flex-grow">
        <h3 class="text-[length:clamp(1.25rem,1vw+1rem,1.5rem)] font-heading font-bold mb-2 text-brand-dark group-hover:text-brand-primary transition-colors">
            {{ course.title }}
        </h3>
        
        <div class="flex items-center mt-auto pt-4 border-t border-gray-100">
            <div class="flex items-center text-sm text-brand-gray">
                <i class="las la-chalkboard-teacher mr-2 text-lg text-brand-primary"></i>
                <span>{{ course.instructor.name|default(course.instructor) }}</span>
            </div>
            <a href="{{ course.link|default(course.url) }}" class="ml-auto inline-flex items-center justify-center w-11 h-11 rounded-full bg-gray-50 text-brand-primary group-hover:bg-brand-primary group-hover:text-white transition-colors" aria-label="Enroll in {{ course.title }}">
                <i class="las la-arrow-right"></i>
            </a>
        </div>
    </div>
</div>
{% endmacro %}

{% macro project_card(project) %}
<div class="relative flex flex-col bg-white dark:bg-surface-sunken rounded-[2rem] p-8 shadow-lg border border-surface-sunken dark:border-white/10 hover:shadow-2xl transition-all duration-500 @container group/project">
    <div class="flex justify-between items-start mb-6">
        <div>
            <span class="inline-block px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest mb-3
                {{ project.status == 'active' ? 'bg-brand-success/10 text-brand-success' : 'bg-brand-gray/10 text-brand-gray' }}">
                {{ project.status }}
            </span>
            <h4 class="text-h3 font-black text-brand-dark dark:text-white group-hover/project:text-brand-primary transition-colors">{{ project.title }}</h4>
        </div>
        <div class="text-right">
            <span class="block text-3xl font-black text-brand-primary">{{ project.percent }}%</span>
            <span class="text-[10px] font-bold text-brand-gray uppercase tracking-widest">Funded</span>
        </div>
    </div>
    
    <p class="text-brand-gray text-sm mb-8 leading-relaxed min-h-[3rem]">
        {{ project.description }}
    </p>
    
    <div class="relative w-full h-4 bg-surface-sunken rounded-full overflow-hidden mb-6">
        <div class="absolute top-0 left-0 h-full bg-brand-primary rounded-full transition-all duration-1000 ease-out relative overflow-hidden" style="width: {{ project.percent }}%">
             <div class="absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"></div>
        </div>
    </div>
    
    <div class="flex justify-between items-center text-sm font-bold mb-8">
        <span class="text-brand-dark dark:text-white">Raised: <span class="text-brand-success">{{ project.raised }}</span></span>
        <span class="text-brand-gray">Goal: {{ project.goal }}</span>
    </div>
    
    <div class="mt-auto">
        <button class="w-full py-4 rounded-xl bg-brand-dark dark:bg-white dark:text-brand-dark text-white font-bold tracking-widest uppercase text-xs hover:bg-brand-primary hover:scale-[1.02] transition-all shadow-lg hover:shadow-brand-primary/20">
            Donate Now
        </button>
    </div>
</div>
{% endmacro %}

{% macro product_card(image, title, price, type, link) %}
<div class="group relative flex flex-col bg-white rounded-3xl border border-brand-primary/5 overflow-hidden hover:shadow-2xl hover:shadow-brand-primary/10 transition-all duration-500 @container">
    <div class="relative aspect-square overflow-hidden bg-surface-sunken">
        {% if image %}
            <img src="{{ image }}" alt="{{ title }}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
        {% else %}
             <div class="w-full h-full flex items-center justify-center text-brand-gray">
                <i class="las la-shopping-bag text-5xl opacity-20"></i>
            </div>
        {% endif %}
        
        <span class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider shadow-sm text-brand-dark">
            {{ type }}
        </span>

        <button class="absolute bottom-4 right-4 w-10 h-10 rounded-full bg-brand-primary text-white shadow-lg translate-y-20 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-premium flex items-center justify-center hover:bg-brand-secondary" aria-label="Quick Add to Cart">
            <i class="las la-plus text-lg"></i>
        </button>
    </div>

    <div class="p-6 flex flex-col flex-grow">
        <h3 class="font-bold text-lg mb-2 text-brand-dark leading-tight group-hover:text-brand-primary transition-colors">{{ title }}</h3>
        <div class="mt-auto flex items-center justify-between">
            <span class="text-xl font-black text-brand-dark">{{ price }}</span>
            <a href="{{ link }}" class="text-xs font-bold uppercase tracking-widest text-brand-gray hover:text-brand-primary transition-colors">Details</a>
        </div>
    </div>
</div>
{% endmacro %}

{% macro prayer_widget(prayer_data) %}
<div class="flex items-center space-x-4 bg-brand-primary/5 px-4 py-2 rounded-lg border border-brand-primary/10" x-data="prayerWidget()">
    <div class="hidden @md:flex flex-col text-right border-r border-brand-primary/20 pr-4">
        <span class="text-xs font-bold text-brand-primary uppercase tracking-wider" x-text="hijriDate">--</span>
        <span class="text-[10px] text-brand-dark opacity-70" x-text="gregorianDate">--</span>
    </div>
    
    <div class="flex items-center">
        <div class="mr-3 p-2 bg-brand-primary text-white rounded-lg shadow-sm">
            <i class="las la-mosque text-xl"></i>
        </div>
        <div>
            <span class="block text-xs text-brand-dark opacity-70">Next Prayer: <span class="font-bold" x-text="nextPrayerName">--</span></span>
            <span class="block font-heading font-bold text-brand-primary leading-none text-lg" x-text="nextPrayerTime">--:--</span>
        </div>
    </div>
</div>
{% endmacro %}

{% macro cta_button(text, link, style='primary', icon=null) %}
    {% set classes = style == 'primary' 
        ? 'bg-brand-primary text-white border-brand-primary hover:bg-brand-secondary hover:border-brand-secondary' 
        : 'bg-transparent text-white border-white hover:bg-white hover:text-brand-dark' %}
    
    <a href="{{ link }}" class="{{ classes }} px-8 py-4 rounded-full font-bold uppercase tracking-widest border transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg flex items-center gap-3">
        <span>{{ text }}</span>
        {% if icon %}
            <i class="las la-{{ icon }}"></i>
        {% elseif style == 'primary' %}
            <i class="las la-arrow-right"></i>
        {% else %}
            <i class="las la-heart"></i>
        {% endif %}
    </a>
{% endmacro %}
