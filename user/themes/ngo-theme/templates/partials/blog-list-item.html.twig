{% set ai_disclosure_enabled = theme_config.ai_disclosure is defined ? theme_config.ai_disclosure : true %}

<article class="group relative flex flex-col h-full bg-white/40 backdrop-blur-3xl rounded-[3.5rem] border border-brand-primary/10 hover:border-brand-primary/40 hover:bg-white/60 shadow-3xl shadow-black/5 hover:shadow-4xl hover:shadow-brand-primary/10 transition-all duration-700 overflow-hidden @container {% if page.header.ai_augmented and ai_disclosure_enabled %} ai-generated{% endif %} animate-in fade-in slide-in-from-bottom-8 duration-700" aria-labelledby="post-title-{{ page.slug }}">
    {% set image = page.media.images|first %}
    {% if image %}
    <div class="relative h-64 @md:h-80 overflow-hidden border-b border-brand-primary/5">
        <a href="{{ page.url }}" class="block w-full h-full" aria-label="Read more about {{ page.title }}">
            <img src="{{ image.cropZoom(1200,800).url }}" class="w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-110" alt="" loading="lazy" decoding="async" />
        </a>
        <div class="absolute inset-0 bg-gradient-to-t from-brand-dark/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000 pointer-events-none" aria-hidden="true"></div>
        <div class="absolute top-8 left-8 z-10">
            {% include 'partials/blog/date.html.twig' %}
        </div>
        {# Premium Badge #}
        {% if page.header.ai_augmented and ai_disclosure_enabled %}
            <div class="absolute bottom-8 left-8 z-10 px-5 py-2 bg-white/20 backdrop-blur-2xl border border-white/20 rounded-full text-[9px] font-black uppercase tracking-[0.3em] text-white flex items-center gap-3" role="status" aria-label="Content Status: AI Augmented">
                <span class="la la-shield-alt animate-pulse" aria-hidden="true"></span>
                <span>AI Augmented</span>
            </div>
        {% endif %}
    </div>
    {% endif %}

    <div class="p-12 flex-grow flex flex-col space-y-8">
        {% if not image %}
        <header class="flex items-center justify-between mb-4">
            {% include 'partials/blog/date.html.twig' %}
        </header>
        {% endif %}

        <div class="flex-grow space-y-6">
            {% include 'partials/blog/title.html.twig' with {title_id: 'post-title-' ~ page.slug, title_level: 'h3', classes: 'text-3xl @lg:text-4xl font-black font-heading text-brand-dark group-hover:text-brand-primary transition-colors line-clamp-2 leading-tight tracking-tightest'} %}
            
            <div class="text-brand-dark/50 leading-relaxed font-medium text-xl line-clamp-3">
                {% set item_content = (page.summary != page.content) ? page.summary : page.content %}
                {{ item_content|raw }}
            </div>
        </div>

        <footer class="pt-10 mt-auto border-t border-brand-primary/5 flex items-center justify-between">
            <nav class="flex-grow overflow-hidden" aria-label="Post tags">
               {% include 'partials/blog/taxonomy.html.twig' %}
            </nav>
            <a href="{{ page.url }}" class="shrink-0 w-16 h-16 flex items-center justify-center rounded-[1.5rem] bg-brand-primary/5 text-brand-primary group-hover:bg-brand-primary group-hover:text-white transition-all duration-700 transform group-hover:scale-110 group-hover:rotate-12 shadow-xl shadow-black/5 group-hover:shadow-brand-primary/20 active:scale-90" aria-label="Continue reading {{ page.title }}">
               <span class="la la-arrow-right text-3xl" aria-hidden="true"></span>
            </a>
        </footer>
    </div>
</article>
