@layer components {
  /* 
     ========================================
     CALCULATOR COMPONENT
     Role: Specialized religious logic (Khums/Zakat) UI
     Blueprint: [calculator.blueprint.md](file:///Users/syedaalin/Documents/Grav/user/themes/nur-ul-huda/blueprints/docs/calculator.blueprint.md)
     ========================================
  */
  /* ========================================
     Calculator Components
     ======================================== */

  @scope (.modular-khums-calculator) {
    :scope {
      background-color: var(--color-surface-subtle);
      padding-block: var(--spacing-section);
    }
  }

  @scope (.calculator-wrapper) {
    :scope {
      container-type: inline-size;
    }
  }

  @scope (.calculator-layout) {
    :scope {
      display: grid;
      gap: var(--space-2xl);
      margin-block-start: var(--space-xl);

      @container (inline-size >= 1024px) {
        grid-template-columns: 1.5fr 1fr;
      }
    }
  }

  @scope (.calculator-inputs) {
    :scope {
      display: flex;
      flex-direction: column;
      gap: var(--space-l);
    }
  }

  @scope (.calculator-card) {
    :scope {
      background-color: oklch(from var(--color-white) l c h / 0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: var(--radius-xl);
      padding: var(--space-l);
      box-shadow: var(--shadow-lg);
      border: var(--border-thin) solid
        oklch(from var(--color-black) l c h / 0.05);
      position: relative;
      overflow: hidden;

      &.calculator-card-success {
        --theme-color: var(--color-success);
      }
      &.calculator-card-error {
        --theme-color: var(--color-error);
      }
      &.calculator-card-primary {
        --theme-color: var(--color-primary);
      }
    }
  }

  @scope (.calculator-card-bg) {
    :scope {
      position: absolute;
      inset: 0;
      background-color: oklch(from var(--theme-color) l c h / 0.05);
      pointer-events: none;
    }
  }

  @scope (.calculator-card-title) {
    :scope {
      display: flex;
      align-items: center;
      gap: var(--space-s);
      font-size: var(--font-size-lg);
      font-weight: 700;
      color: var(--color-dark);
      margin-block-end: var(--space-l);
    }
  }

  @scope (.calculator-card-icon) {
    :scope {
      display: flex;
      align-items: center;
      justify-content: center;
      justify-content: center;
      inline-size: calc(var(--space-xl) + var(--space-s));
      block-size: calc(var(--space-xl) + var(--space-s));
      border-radius: var(--radius-lg);
      background-color: oklch(from var(--theme-color) l c h / 0.1);
      color: var(--theme-color);
      font-size: var(--font-size-xl);
    }
  }

  @scope (.calculator-fields-grid) {
    :scope {
      display: grid;
      gap: var(--space-m);
      grid-template-columns: 1fr;
      @container (inline-size >= 40rem) {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  }

  @scope (.calculator-label) {
    :scope {
      display: block;
      font-size: var(--font-size-sm);
      font-weight: 600;
      color: var(--color-text);
      margin-block-end: var(--space-xs);
    }
  }

  @scope (.calculator-input-wrapper) {
    :scope {
      position: relative;
    }
  }

  @scope (.calculator-currency) {
    :scope {
      position: absolute;
      inset-inline-start: var(--space-m);
      inset-block-start: 50%;
      translate: 0 -50%;
      color: var(--color-subtle);
      font-weight: 600;
    }
  }

  @scope (.calculator-input) {
    :scope {
      inline-size: 100%;
      padding-block: calc(var(--space-s) * 1.5);
      padding-inline-start: calc(var(--space-xl) + var(--space-s));
      padding-inline-end: var(--space-m);
      border-radius: var(--radius-lg);
      border: var(--border-thin) solid
        oklch(from var(--color-black) l c h / 0.1);
      background-color: var(--color-white);
      transition: all var(--transition-standard);

      &:focus {
        outline: none;
        border-color: var(--theme-color);
        box-shadow: 0 0 0 calc(var(--border-medium) * 2)
          oklch(from var(--theme-color) l c h / 0.1);
      }
    }
  }

  @scope (.calculator-summary) {
    :scope {
      display: flex;
      flex-direction: column;
      gap: var(--space-s);
      padding-block: var(--space-l);
      border-block-end: var(--border-thin) solid
        oklch(from var(--color-black) l c h / 0.1);
    }
  }

  @scope (.calculator-summary-row) {
    :scope {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: var(--font-size-sm);
    }
  }

  @scope (.calculator-total) {
    :scope {
      position: relative;
      margin-block-start: var(--space-l);
      padding: var(--space-l);
      background-color: var(--color-primary);
      color: var(--color-white);
      border-radius: var(--radius-xl);
      text-align: center;
      overflow: hidden;
    }
  }

  @scope (.calculator-total-amount) {
    :scope {
      font-size: var(--font-size-3xl);
      font-weight: 900;
      line-height: 1;
      margin-block-start: var(--space-s);
    }
  }

  @scope (.calculator-toggle-wrapper) {
    :scope {
      margin-block-start: var(--space-l);
      text-align: center;
    }
  }

  @scope (.calculator-toggle-label) {
    :scope {
      display: inline-flex;
      align-items: center;
      gap: var(--space-s);
      cursor: pointer;
    }
  }

  @scope (.calculator-toggle-switch) {
    :scope {
      inline-size: 3rem;
      block-size: 1.75rem;
      background-color: oklch(from var(--color-black) l c h / 0.1);
      border-radius: var(--radius-full);
      position: relative;
      transition:
        background-color var(--transition-standard),
        box-shadow var(--transition-standard);

      &::after {
        content: "";
        position: absolute;
        inset-block-start: 0.25rem;
        inset-inline-start: 0.25rem;
        inline-size: 1.25rem;
        block-size: 1.25rem;
        background-color: var(--color-white);
        border-radius: 50%;
        transition: transform var(--transition-standard);
        box-shadow: 0 0.0625rem 0.125rem
          oklch(from var(--color-black) l c h / 0.2);
      }

      input:checked + & {
        background-color: var(--color-primary);
        &::after {
          translate: 1.25rem 0;
        }
      }

      :scope:where([dir="rtl"]) input:checked + &::after {
        translate: -1.25rem 0;
      }
    }
  }
}
