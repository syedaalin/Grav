@layer components {
  /* 
     ========================================
     NEWSLETTER COMPONENT
     Role: Subscription forms and marketing UI
     Blueprint: [ui-components.blueprint.md](file:///Users/syedaalin/Documents/Grav/user/themes/nur-ul-huda/blueprints/docs/ui-components.blueprint.md)
     ========================================
  */
  /* 
     ========================================
     NEWSLETTER FORM
     ========================================
  */
  @scope (.bottom-banner-newsletter) {
    /* Shared Layout for Container */
    :scope {
      /* Spacing and separators handled by .bottom-banner-layout-stack */
    }

    .newsletter-container {
      display: grid;
      gap: var(--space-l);
      grid-template-columns: 1fr;
      align-items: center;

      justify-items: center;
      text-align: center;
    }
  }

  @scope (.newsletter-form) {
    :scope {
      inline-size: 100%;
      max-inline-size: 40rem; /* Slightly wider for standalone centered form */
      margin-inline: auto;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: var(--space-m);
      background: var(--glass-bg-dark);
      backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
      -webkit-backdrop-filter: blur(var(--glass-blur))
        saturate(var(--glass-saturate));
      border: var(--border-thin) solid var(--glass-border-dark);
      border-radius: var(--radius-lg); /* Squares off for stack */
      padding: var(--space-m);
      transition: all var(--transition-smooth);
      position: relative;
      background-image: var(--glass-reflection);
      background-size: 200% 200%;
      animation: glass-liquid 20s linear infinite;

      @container (inline-size >= 30rem) {
        flex-direction: row;
        border-radius: var(--radius-full);
        padding: var(--space-xs);
        gap: var(--space-xs);
      }

      &:focus-within {
        border-color: var(--color-primary);
        box-shadow: 0 0 0 calc(var(--border-medium) * 2)
          oklch(from var(--color-primary) l c h / 0.15);
        scale: 1.01;
      }
    }

    .newsletter-input-wrapper {
      position: relative;
      flex: 1;
      display: flex;
      align-items: center;
    }

    .newsletter-input {
      inline-size: 100%;
      background: transparent;
      border: none;
      color: var(--color-white);
      padding-inline: var(--space-m);
      padding-block: var(--space-l) var(--space-s);
      font-family: var(--font-body);
      block-size: var(--space-2xl);

      &:focus {
        outline: none;
      }

      &:not(:placeholder-shown):valid {
        color: var(--color-success);
      }

      &:not(:placeholder-shown):invalid {
        color: var(--color-error);
      }
    }

    .newsletter-label {
      position: absolute;
      inset-inline-start: var(--space-m);
      inset-block-start: 50%;
      translate: 0 -50%;
      color: oklch(from var(--color-white) l c h / 0.5);
      font-size: var(--font-size-base);
      pointer-events: none;
      transition: all var(--transition-bounce);
      transform-origin: inline-start center;
    }

    .newsletter-input:focus + .newsletter-label,
    .newsletter-input:not(:placeholder-shown) + .newsletter-label {
      inset-block-start: 0.5rem;
      translate: 0 0;
      scale: 0.75;
      color: var(--color-primary);
    }

    .newsletter-submit {
      background: var(--color-primary);
      color: var(--color-white);
      border: none;
      border-radius: var(--radius-full);
      padding-inline: var(--space-xl);
      font-weight: 700;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      font-size: var(--font-size-xs);
      cursor: pointer;
      transition: all var(--transition-smooth);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-s);
      block-size: 100%;
      min-block-size: 3.5rem;
      position: relative;
      overflow: hidden;

      i {
        transition: transform var(--transition-smooth);
      }

      &:hover {
        background-color: oklch(from var(--color-primary) l c h / 0.9);
        box-shadow: 0 4px 12px oklch(from var(--color-primary) l c h / 0.3);
        translate: 0 -2px;

        i {
          transform: translateX(4px) rotate(-10deg);
        }
      }

      &:active {
        translate: 0 0;
        scale: 0.98;
      }
    }
  }
}
