<section class="modular-section modular-services">
    <div class="section-container">
        {% if page.content %}
            <header class="section-header animate-fade-in-up">
                <div class="prose-custom prose-fluid">
                    {{ page.content|raw }}
                </div>
            </header>
        {% endif %}

        <div class="services-grid animate-fade-in-up delay-100">
        {% for service in page.header.services %}
            {% set width_class = '' %}
            {% if service.width == 'feature' %}
                {% set width_class = 'service-card-feature' %}
            {% elseif service.width == 'wide' %}
                {% set width_class = 'service-card-wide' %}
            {% else %}
                {% set width_class = 'service-card' %}
            {% endif %}

            <div class="card-glass {{ width_class }}" 
                 {% if service.color %}style="--service-bg: oklch(from {{ service.color }} L C H / 0.1); background-color: var(--service-bg);"{% endif %}>
                
                <div class="service-content">
                    <div class="service-icon-wrapper">
                        <i class="la la-fw {{ service.icon }} service-icon" aria-hidden="true"></i>
                    </div>
                    
                    <h3 class="service-title">
                        {{ service.title }}
                    </h3>
                    
                    <p class="service-description">
                        {{ service.text }}
                    </p>

                    {% if service.url %}
                        <div class="service-link-wrapper">
                            <a href="{{ service.url }}" class="service-link">
                                Discover <i class="la la-arrow-right service-link-icon" aria-hidden="true"></i>
                            </a>
                        </div>
                    {% endif %}
                </div>

                {# Decorative Radial Glow #}
                <div class="service-glow"
                     style="background: radial-gradient(circle, oklch(from {{ service.color|default('var(--color-primary)') }} L C H), transparent 70%);"></div>
            </div>
        {% endfor %}
        </div>
    </div>
</section>
