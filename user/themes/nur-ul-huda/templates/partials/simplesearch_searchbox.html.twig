{% set min_chars = config.get('plugins.simplesearch.min_query_length', 3) %}
<div class="search-wrapper relative @container">
    <form name="search" data-simplesearch-form action="{{ base_url }}{{ config.plugins.simplesearch.route == '@self' ? '' : (config.plugins.simplesearch.route == '/' ? '' : config.plugins.simplesearch.route) }}/query" method="get">
        <div class="relative group">
            <label for="searchfield" class="sr-only">{{ 'PLUGIN_SIMPLESEARCH.SEARCH_PLACEHOLDER'|t }}</label>
            <input
                id="searchfield"
                name="searchfield"
                class="block w-full ps-10 pe-4 py-3 bg-white/40 backdrop-blur-md border border-white/60 rounded-2xl leading-5 placeholder-gray-400 focus:input-focus transition-all duration-300 @sm:text-sm"
                type="text"
                {% if min_chars > 0 %} minlength="{{ min_chars }}" {% endif %}
                required
                placeholder="{{ 'PLUGIN_SIMPLESEARCH.SEARCH_PLACEHOLDER'|t }}"
                value="{{ query|e }}"
                data-search-invalid="{{ 'PLUGIN_SIMPLESEARCH.SEARCH_FIELD_MINIMUM_CHARACTERS'|t(min_chars)|e }}"
                data-search-separator="{{ config.system.param_sep }}"
            />
            <div class="absolute inset-y-0 start-0 ps-3.5 flex items-center pointer-events-none group-focus-within:text-primary transition-colors">
                <i class="la la-search text-subtle group-focus-within:text-primary transition-colors" aria-hidden="true"></i>
            </div>
        </div>
        {% if config.plugins.simplesearch.display_button %}
            <button type="submit" class="btn-primary mt-3 w-full py-4 uppercase tracking-widest text-xs">
                <i class="la la-search mr-2" aria-hidden="true"></i> {{ 'PLUGIN_SIMPLESEARCH.SEARCH_BUTTON'|t }}
            </button>
        {% endif %}
    </form>
</div>

