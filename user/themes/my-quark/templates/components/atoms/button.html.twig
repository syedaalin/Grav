{#
/**
 * BUTTON COMPONENT (2026 Edition)
 * 
 * Reusable button with variants and states
 * Follows 2026 standards: minimum 44x44px touch target, haptic feedback
 * 
 * @param string text       - Button label
 * @param string url        - Button destination (optional)
 * @param string variant    - Style variant: primary|secondary|accent|ghost|glass
 * @param string size       - Size: sm|md|lg
 * @param boolean haptic    - Enable haptic feedback (default: true)
 * @param string icon       - Icon class (optional)
 * @param string class      - Additional CSS classes
 * @param object attrs      - Additional HTML attributes (map)
 * 
 * Usage:
 * {% include 'components/button.html.twig' with {
 *     text: 'Get Started',
 *     url: '/start',
 *     variant: 'primary',
 *     size: 'lg'
 * } %}
 */
#}

{% set text = text|default('THEME_MY_QUARK.BUTTON_DEFAULT'|t) %}
{% set variant = variant|default(theme_config.button_default_variant|default('primary')) %}
{% set size = size|default(theme_config.button_default_size|default('md')) %}
{% set haptic = haptic is defined ? haptic : (theme_config.button_haptic_enabled|default(false)) %}
{% set class = class|default('') %}
{% set attrs = attrs|default({}) %}

{# Build variant classes #}
{% set variant_classes = {
    'primary': 'btn-primary',
    'secondary': 'btn-secondary',
    'accent': 'btn-accent',
    'ghost': 'btn-ghost',
    'glass': 'btn-glass'
} %}

{% set size_classes = {
    'sm': 'btn-sm',
    'md': 'btn-md',
    'lg': 'btn-lg'
} %}

{% set btn_class = 'btn ' ~ variant_classes[variant] ~ ' ' ~ size_classes[size] ~ ' ' ~ class %}

{# Build attributes string #}
{% set attr_string = '' %}
{% if haptic %}
    {% set attr_string = attr_string ~ ' data-haptic="true"' %}
{% endif %}

{% for key, value in attrs %}
    {% set attr_string = attr_string ~ ' ' ~ key ~ '="' ~ value|e('html_attr') ~ '"' %}
{% endfor %}

{# Render button or link #}
{% if url %}
    <a href="{{ url }}" class="{{ btn_class }}" {{ attr_string|raw }}>
        {% if icon %}
            <i class="{{ icon }}" aria-hidden="true"></i>
        {% endif %}
        <span>{{ text }}</span>
    </a>
{% else %}
    <button type="button" class="{{ btn_class }}" {{ attr_string|raw }}>
        {% if icon %}
            <i class="{{ icon }}" aria-hidden="true"></i>
        {% endif %}
        <span>{{ text }}</span>
    </button>
{% endif %}
