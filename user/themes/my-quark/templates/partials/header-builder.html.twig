{% do assets.addCss('theme://css/header.css') %}
{% set items = theme_var('agent_header_structure') %}

<nav class="header-builder-container builder-active" role="navigation" aria-label="Main Navigation">
    {# LOGIC: Prioritize Cognitive Navigation (Tab 5) over Standard Header Builder (Tab 3) #}
    {% set cognitive_nav = theme_var('agent_nav_nodes') %}
    
    {% if cognitive_nav %}
        {# Render Cognitive Navigation (Smart Nodes) #}
        {% include 'partials/navigation.html.twig' %}
    {% elseif items %}
        {# Render Standard Header Builder (Recursive) #}
        {% include 'partials/nav.html.twig' with {'items': items} %}
    {% else %}
        {# Fallback / Empty State #}
        <div class="header-default">
            {% include 'partials/logo.html.twig' %}
            {# Fallback to simple page tree if nothing configured #}
            {% include 'partials/navigation.html.twig' with {'fallback': true} %} 
        </div>
    {% endif %}
</nav>
