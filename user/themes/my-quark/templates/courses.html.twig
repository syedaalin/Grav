{% extends 'partials/base.html.twig' %}

{% block content %}
    <div class="courses-intro">
        {{ content|raw }}
    </div>

    <div class="course-grid">
        {% set courses = page.children %}
        
        {% for course in courses %}
            <div class="course-card">
                {% if course.media.images|first %}
                    {% set image = course.media.images|first %}
                    {{ image.cropZoom(800,500).html('', course.title, 'course-thumbnail')|raw }}
                {% endif %}
        
                <div class="course-content">
                    <h2>{{ course.title }}</h2>
        
                    {% if course.header.instructor or course.header.duration or course.header.level %}
                    <div class="course-meta" style="margin-bottom: 1rem; color: var(--text-muted); font-size: 0.9rem;">
                        {% if course.header.instructor %}
                        <span style="margin-right: 10px;"><i class="fa fa-user"></i> {{ course.header.instructor }}</span>
                        {% endif %}
                        {% if course.header.duration %}
                        <span style="margin-right: 10px;"><i class="fa fa-clock-o"></i> {{ course.header.duration }}</span>
                        {% endif %}
                        {% if course.header.level %}
                        <span><i class="fa fa-signal"></i> {{ course.header.level }}</span>
                        {% endif %}
                    </div>
                    {% endif %}
        
                    <div class="course-description">
                        {{ course.header.short_description|default(course.summary|striptags|slice(0, 180) ~ '...') }}
                    </div>
        
                    <div class="course-actions">
                        <a href="{{ course.url }}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
        {% run %}
        {% endfor %}

        {% if courses|length == 0 %}
            <p class="no-courses">No courses available at the moment. Please check back soon!</p>
        {% endif %}
    </div>
{% endblock %}
