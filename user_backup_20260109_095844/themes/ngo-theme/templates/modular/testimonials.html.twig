{# 
   Testimonials Modular Template
   @desc Displays impact stories/testimonials in a horizontal slider.
#}
<section class="testimonials-modular py-32 bg-brand-bg @container overflow-hidden [content-visibility:auto] [contain-intrinsic-size:500px]">
    <div class="container mx-auto px-6 max-w-container">
        {% if page.header.title %}
        <header class="mb-20 text-center @lg:text-left">
            <span class="text-xs font-black uppercase tracking-[0.4em] text-brand-primary animate-in slide-in-from-left duration-700">Success Stories</span>
            <h2 class="text-h2 font-black text-brand-dark tracking-tighter leading-tightest">
                {{ page.header.title }}
            </h2>
        </header>
        {% endif %}

        <div class="testimonial-carousel flex gap-10 overflow-x-auto snap-x snap-mandatory no-scrollbar pb-12 cursor-grab active:cursor-grabbing">
            {% set testimonials = page.header.testimonials|default(theme_config.testimonials_list) %}
            {% for item in testimonials %}
                <div class="testimonial-card shrink-0 w-[85vw] @md:w-[500px] snap-center p-12 bg-white/60 backdrop-blur-3xl border border-white/20 rounded-[3rem] shadow-xl hover:shadow-4xl hover:border-brand-primary/20 transition-all duration-700 group">
                    <div class="space-y-8 h-full flex flex-col justify-between">
                        <div class="space-y-6">
                            <div class="flex gap-1 text-brand-primary opacity-60">
                                {% for i in 1..5 %}<span class="la la-star text-xl"></span>{% endfor %}
                            </div>
                            <blockquote class="text-brand-dark text-xl @md:text-2xl font-medium leading-relaxed tracking-tight">
                                "{{ item.quote }}"
                            </blockquote>
                        </div>
                        
                        <div class="pt-8 border-t border-brand-dark/5 flex items-center gap-5">
                            <div class="w-14 h-14 bg-gradient-to-br from-brand-primary to-brand-secondary rounded-2xl flex items-center justify-center text-white font-black text-lg shadow-lg group-hover:scale-110 transition-transform">
                                {{ item.name|first }}
                            </div>
                            <div>
                                <cite class="not-italic block font-black text-brand-dark text-lg tracking-tight">{{ item.name }}</cite>
                                <span class="block text-xs text-brand-dark/40 font-bold uppercase tracking-widest mt-1">{{ item.role }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
            
            {# Spacer for right padding on carousel #}
            <div class="shrink-0 w-6"></div>
        </div>
    </div>
</section>
