<section class="py-32 bg-brand-dark text-white relative overflow-hidden @container [content-visibility:auto] [contain-intrinsic-size:1000px]">
     {# Background Map #}
    <div class="absolute inset-0 opacity-10 bg-[url('https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/World_map_blank_without_borders.svg/2000px-World_map_blank_without_borders.svg.png')] bg-cover bg-center pointer-events-none mix-blend-overlay"></div>

    <div class="container mx-auto px-6 max-w-container relative z-10">
        <div class="text-center mb-20 animate-fade-in-up">
            <span class="text-brand-accent font-bold uppercase tracking-widest text-sm mb-2 block">
                Impact Roadmap
            </span>
            <h2 class="text-h2 font-black mb-6">
                {{ page.header.title|default('Current Projects') }}
            </h2>
        </div>
        
        <div class="space-y-12">
            {% set projects = page.header.projects ?: config.theme.project_timeline_list %}
            
            {% if projects %}
                {% for project in projects %}
                    <div class="relative pl-12 @md:pl-0 animate-fade-in-up" style="animation-delay: {{ loop.index0 * 150 }}ms">
                        {# Timeline Line #}
                        <div class="absolute left-6 @md:left-1/2 top-0 bottom-0 w-px bg-white/10 -translate-x-1/2 hidden @md:block"></div>
                        
                        {# Alterating Layout #}
                        <div class="flex flex-col {{ loop.index is odd ? '@md:flex-row' : '@md:flex-row-reverse' }} items-center gap-12 group">
                            <div class="w-full @md:w-1/2 {{ loop.index is odd ? '@md:text-right @md:pr-12' : '@md:text-left @md:pl-12' }}">
                                <h3 class="text-2xl font-bold mb-2 text-brand-primary">{{ project.title }}</h3>
                                <p class="text-brand-gray mb-4">{{ project.location }}</p>
                                <p class="text-white/80 leading-relaxed text-sm">
                                    {{ project.description }}
                                </p>
                            </div>
                            
                            <div class="absolute left-0 @md:left-1/2 w-12 h-12 rounded-full bg-surface-sunken border-4 border-brand-dark @md:-translate-x-1/2 flex items-center justify-center text-brand-primary shadow-2xl z-10 transition-transform duration-500 group-hover:scale-125">
                                <i class="las la-{{ project.icon|default('hand-holding-heart') }}"></i>
                            </div>
                            
                            <div class="w-full @md:w-1/2 {{ loop.index is odd ? '@md:pl-12' : '@md:pr-12' }}">
                                <div class="bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm hover:bg-white/10 transition-colors duration-300">
                                    <div class="flex justify-between text-xs font-bold uppercase tracking-widest mb-2">
                                        <span>Funding Status</span>
                                        <span class="text-brand-success">{{ project.percent }}% Funded</span>
                                    </div>
                                    <div class="w-full h-2 bg-white/10 rounded-full overflow-hidden">
                                        <div class="h-full bg-brand-success shadow-[0_0_20px_rgba(34,197,94,0.5)] transition-all duration-1000 ease-out" style="width: {{ project.percent }}%"></div>
                                    </div>
                                    <div class="mt-4 flex justify-between items-center">
                                        <span class="text-sm font-bold">{{ project.raised }} / {{ project.goal }}</span>
                                        <button class="px-4 py-2 bg-brand-primary text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-brand-secondary transition-colors hover:scale-105 transform">
                                            Donate
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                {# Fallback Demo Content #}
                 <div class="text-center text-brand-gray">
                    <p>No projects configured. Add 'projects' list to page header or theme settings.</p>
                 </div>
            {% endif %}
        </div>
    </div>
</section>
