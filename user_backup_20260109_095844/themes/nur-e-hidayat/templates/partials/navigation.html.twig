<nav class="max-w-7xl mx-auto px-fluid-md h-20 flex items-center justify-between" x-data="{ mobileMenu: false }">
	<div class="flex items-center gap-12">
		{% include 'partials/logo.html.twig' %}

		{# Desktop Menu #}
		<ul class="hidden lg:flex items-center gap-10 font-bold text-[11px] uppercase tracking-widest text-sacred-white/70">
			<li class="relative group" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
				<a href="#" class="hover:text-accent-gold transition-colors flex items-center gap-2">
					Digital Sanctum
					<i class="fa fa-caret-down text-[8px]"></i>
				</a>
				<div x-show="open" class="absolute top-full inset-inline-start-0 w-64 pt-4 z-50">
					<div class="glass-panel p-4 rounded-2xl border-white/5 space-y-4">
						<a href="/services/istikhara" class="block hover:text-accent-gold transition-colors text-sm">Online Istikhara</a>
						<a href="/services/counseling" class="block hover:text-accent-gold transition-colors text-sm">Live Counseling</a>
						<a href="/services/fiqh" class="block hover:text-accent-gold transition-colors text-sm">Jurisprudence Library</a>
					</div>
				</div>
			</li>
			<li class="relative group" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
				<a href="#" class="hover:text-accent-gold transition-colors flex items-center gap-2">
					Sacred Academy
					<i class="fa fa-caret-down text-[8px]"></i>
				</a>
				<div x-show="open" class="absolute top-full inset-inline-start-0 w-64 pt-4 z-50">
					<div class="glass-panel p-4 rounded-2xl border-white/5 space-y-4">
						<a href="{{ theme_config.moodle_url }}/course/index.php" class="block hover:text-accent-gold transition-colors text-sm">Browse Courses</a>
						<a href="{{ theme_config.moodle_url }}/enrol/index.php" class="block hover:text-accent-gold transition-colors text-sm">Enrollment Center</a>
					</div>
				</div>
			</li>
			<li class="relative group" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
				<a href="#" class="hover:text-accent-gold transition-colors flex items-center gap-2">
					Support Us
					<i class="fa fa-caret-down text-[8px]"></i>
				</a>
				<div x-show="open" class="absolute top-full inset-inline-start-0 w-64 pt-4 z-50">
					<div class="glass-panel p-4 rounded-2xl border-white/5 space-y-4">
						<a href="/donate" class="block hover:text-accent-gold transition-colors text-sm">General Donation</a>
						<a href="/donate/khums" class="block hover:text-accent-gold transition-colors text-sm">Khums & Sadaqah</a>
					</div>
				</div>
			</li>
		</ul>
	</div>

	<div
		class="flex items-center gap-4">
		{# Snipcart Indicator #}
		<button class="snipcart-checkout relative p-2 hover:text-accent-gold transition-colors">
			<i class="fa fa-shopping-basket text-xl"></i>
			<span class="snipcart-items-count absolute -top-1 inset-inline-end-[-0.25rem] bg-accent-gold text-divine-dark text-[10px] font-black w-4 h-4 rounded-full flex items-center justify-center opacity-0 transition-opacity">0</span>
		</button>

		{# SSO Action Button #}
		{% if grav.user.authenticated %}
			<a href="{{ theme_config.moodle_url }}/login/index.php" class="btn-sacred hidden md:flex items-center gap-2">
				<i class="fa fa-th-large"></i>
				{{ 'THEME_NUR_E_HIDAYAT.NAV.DASHBOARD'|t|default('My Dashboard') }}
			</a>
		{% else %}
			<a href="{{ theme_config.moodle_url }}/login/index.php" class="btn-sacred hidden md:flex items-center gap-2">
				<i class="fa fa-user-circle"></i>
				{{ 'THEME_NUR_E_HIDAYAT.NAV.LOGIN'|t|default('Login') }}
			</a>
		{% endif %}

		{# Mobile Trigger #}
		<button @click="mobileMenu = true" class="lg:hidden p-2 text-2xl">
			<i class="fa fa-bars"></i>
		</button>
	</div>

	{# Mobile Menu Overlay #}
	<div x-show="mobileMenu" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-x-full rtl:-translate-x-full" x-transition:enter-end="opacity-100 translate-x-0" x-transition:leave="transition ease-in duration-300" x-transition:leave-start="opacity-100 translate-x-0" x-transition:leave-end="opacity-0 translate-x-full rtl:-translate-x-full" class="fixed inset-0 z-100 glass-panel backdrop-blur-3xl lg:hidden flex flex-col p-12" style="display: none;">
		<button @click="mobileMenu = false" class="absolute top-8 inset-inline-end-8 text-3xl">
			<i class="fa fa-times"></i>
		</button>

		<div class="mt-12">
			{% include 'partials/logo.html.twig' %}
		</div>

		<ul class="mt-16 space-y-8 text-2xl font-black italic">
			{% for page in pages.children.visible %}
				<li>
					<a href="{{ page.url }}" @click="mobileMenu = false" class="hover:text-accent-gold">{{ page.title }}</a>
				</li>
			{% endfor %}
		</ul>

		<div class="mt-auto space-y-4">
			<a href="{{ theme_config.moodle_url }}/login/index.php" class="btn-sacred w-full justify-center">
				{{ grav.user.authenticated ? 'My Dashboard' : 'Login / Sanctum' }}
			</a>
		</div>
	</div>
</nav>
